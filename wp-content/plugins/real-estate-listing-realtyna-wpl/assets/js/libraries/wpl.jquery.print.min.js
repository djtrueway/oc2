(function(e){function f(g){var h=e("");try{h=e(g).clone()}catch(i){h=e("<span />").html(g)}return h}function b(n,k,h){var l=e.Deferred();try{n=n.contentWindow||n.contentDocument||n;var g=n.document||n.contentDocument||n;if(h.doctype){g.write(h.doctype)}g.write(k);g.close();var m=false;var i=function(){if(m){return}n.focus();try{if(!n.document.execCommand("print",false,null)){n.print()}e("body").focus()}catch(o){n.print()}n.close();m=true;l.resolve()};e(n).on("load",i);setTimeout(i,h.timeout)}catch(j){l.reject(j)}return l}function c(i,h){var j=e(h.iframe+"");var g=j.length;if(g===0){j=e('<iframe height="0" width="0" border="0" wmode="Opaque"/>').prependTo("body").css({position:"absolute",top:-999,left:-999})}var k=j.get(0);return b(k,i,h).done(function(){setTimeout(function(){if(g===0){j.remove()}},1000)}).fail(function(l){console.error("Failed to print from iframe",l);a(i,h)}).always(function(){try{h.deferred.resolve()}catch(l){console.warn("Error notifying deferred",l)}})}function a(h,g){var i=window.open();return b(i,h,g).always(function(){try{g.deferred.resolve()}catch(j){console.warn("Error notifying deferred",j)}})}function d(g){return !!(typeof Node==="object"?g instanceof Node:g&&typeof g==="object"&&typeof g.nodeType==="number"&&typeof g.nodeName==="string")}e.print=e.fn.print=function(){var p,m,o=this;if(o instanceof e){o=o.get(0)}if(d(o)){m=e(o);if(arguments.length>0){p=arguments[0]}}else{if(arguments.length>0){m=e(arguments[0]);if(d(m[0])){if(arguments.length>1){p=arguments[1]}}else{p=arguments[0];m=e("html")}}else{m=e("html")}}var i={globalStyles:true,mediaPrint:false,stylesheet:null,noPrintSelector:".no-print",iframe:true,append:null,prepend:null,manuallyCopyFormValues:true,deferred:e.Deferred(),timeout:750,title:null,doctype:"<!doctype html>"};p=e.extend({},i,(p||{}));var j=e("");if(p.globalStyles){j=e("style, link, meta, base, title")}else{if(p.mediaPrint){j=e("link[media=print]")}}if(p.stylesheet){j=e.merge(j,e('<link rel="stylesheet" href="'+p.stylesheet+'">'))}var g=m.clone();g=e("<span/>").append(g);g.find(p.noPrintSelector).remove();g.append(j.clone());if(p.title){var n=e("title",g);if(n.length===0){n=e("<title />");g.append(n)}n.text(p.title)}g.append(f(p.append));g.prepend(f(p.prepend));if(p.manuallyCopyFormValues){g.find("input").each(function(){var q=e(this);if(q.is("[type='radio']")||q.is("[type='checkbox']")){if(q.prop("checked")){q.attr("checked","checked")}}else{q.attr("value",q.val())}});g.find("select").each(function(){var q=e(this);q.find(":selected").attr("selected","selected")});g.find("textarea").each(function(){var q=e(this);q.text(q.val())})}var l=g.html();try{p.deferred.notify("generated_markup",l,g)}catch(h){console.warn("Error notifying deferred",h)}g.remove();if(p.iframe){try{c(l,p)}catch(k){console.error("Failed to print from iframe",k.stack,k.message);a(l,p)}}else{a(l,p)}return this}})(jQuery);