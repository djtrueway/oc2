!function(a){"use strict";function b(a,b){if(a=JSON.parse(a),b.html(""),a){var c=b.find("option[value=0]").html();c=c||Estatik.tr.select_location,b.html('<option value="">'+c+"</option>");for(var d in a)a[d].long_name&&b.append('<option value="'+a[d].id+'">'+a[d].long_name+"</option>");b.removeProp("disabled")}}function c(c,d){c.action="es_get_location_items",c.nonce=Estatik.settings.front_nonce,a.post(Estatik.ajaxurl,c,function(a){b(a,d);var c=d.data("value");c&&(d.val(c),d.trigger("change"))})}function d(b){if(b)for(var d in b){var e=a("[data-type="+d+"]");if(e.length){c({type:d,status:"initialize"},e);break}}}var e=Estatik.widgets.search.initPriority;a(function(){var b=a(".es-search__wrapper"),f=a(".es-request-widget-wrap form"),g=a(".es-response-block"),h=a(".es-select2-tags"),i=a(".js-es-select2-base");d(e),a(document).on("change",".js-es-location",function(){var b=a(this),d=b.data("type"),f=b.val();if(e[d])for(var g in e[d])if("string"==typeof e[d][g]){var h=a("[data-type="+e[d][g]+"]");h&&c({type:e[d][g],status:"dependency",val:f},h)}}),a(".js-es-tabs").each(function(){var b=a(this).find(".js-es-tabs__links"),c=a(this).find(".js-es-tabs__content");b.find("a").on("click touch tap",function(){var d=a(a(this).attr("href"));return b.find("li").removeClass("active"),a(this).closest("li").addClass("active"),c.find(".js-es-tabs__tab").removeClass("active"),d.addClass("active"),a(window).trigger("resize"),!1});var d=window.location.hash;d&&c.find(d).length?b.find("a[href="+d+"]").trigger("click").trigger("touch"):c.find(".js-es-tabs__tab.active").length||b.find("li:first-child a").trigger("click").trigger("touch")}),h.length&&h.select2({tags:!0}),i.length&&i.select2(),b.find("select:not(.es-select2-tags)").select2(),f.on("submit",function(){var b=a(this).serialize(),c=a(this);return a.post(Estatik.ajaxurl,b,function(a){a=JSON.parse(a),g.html(a),c.hide()}),!1}),a(document).on("click",".js-es-request-form-show",function(){f.show(),g.html(""),f.find("input[type=text], input[type=tel], input[type=email], textarea").val(""),"undefined"!=typeof grecaptcha&&"v2"===Estatik.settings.recaptcha_version&&grecaptcha.reset()}),b.find("input[type=reset]").click(function(){var b=a(this).closest("form");b.find(".es-search__field").find("input, select").val(null).attr("value","").attr("data-value","").trigger("change");var c=b.find(".es-select2-tags");c.length&&(c.select2("val",""),c.select2("data",null),c.find("option").removeProp("selected").removeAttr("selected"))}),a(".js-trigger-upload").click(function(){return a(a(this).data("selector")).trigger("click"),!1}),a(".js-es-input-image").change(function(){var b=this,c=new FileReader;c.onload=function(c){a(b).closest("div").find(".js-es-image").html("<img src='"+c.target.result+"'>")},c.readAsDataURL(b.files[0]),a(".js-trigger-upload span").html(Estatik.tr.replace_photo)}),a(".js-autocomplete-wrap input").keyup(function(){var b=a(this),c=a(this).data("action");a.post(Estatik.ajaxurl,{action:c,nonce:Estatik.settings.front_nonce,s:a(this).val()},function(a){b.closest(".js-autocomplete-wrap").find(".es-autocomplete-result").html(a)})}),a(".js-autocomplete-wrap").on("click","li",function(b){var c=a(this),d=c.closest(".js-autocomplete-wrap");d.find("input").val(c.data("content")),d.find(".es-autocomplete-result").html(""),b.stopPropagation()}),a("body").click(function(){a(".es-autocomplete-result").html("")}),a(".es-recaptcha-wrapper .g-recaptcha").each(function(){if(!a(this).closest(".contact-block__send-form-wrapper").length){var b=a(this),c=b.parent().innerWidth()/304;b.css("transform","scale("+c+")"),b.css("transform-origin","0 0"),setTimeout(function(){b.parent().height(b[0].getBoundingClientRect().height)},600)}}),a(document).on("click",".js-es-wishlist-button",function(){var b=a(this);if(b.removeClass("error"),!b.hasClass("preload")){var c=b.data();c.action="es_wishlist_"+c.method,c.nonce=Estatik.settings.wishlist_nonce,b.addClass("preload");var d=b.closest("#es-saved-homes"),e=b.closest("li.properties");a.post(Estatik.ajaxurl,c,function(c){c=c||{},"success"===c.status?(a(b).replaceWith(c.data),d.length&&e.fadeOut(400,function(){e.remove()})):(b.addClass("error"),c.message&&alert(c.message))},"json").always(function(){b.removeClass("preload")}).fail(function(){b.addClass("error")})}return!1}),a(".js-es-save-search").click(function(){var b=a(this),c=b.closest("form");b.val();b.val(Estatik.tr.saving);var d=new FormData(c[0]);d.append("action","es_save_search"),d.append("nonce",Estatik.settings.save_search_nonce),b.hasClass("es-button-green-corner")||b.addClass("es-button-green-corner"),c.find(".js-es-search__messages").html(""),a.ajax({url:Estatik.ajaxurl,type:"POST",data:d,dataType:"json",processData:!1,contentType:!1,success:function(a){a=a||{},"success"===a.status?b.val(Estatik.tr.saved):"error"===a.status&&(b.val(Estatik.tr.error),b.removeClass("es-button-green-corner").addClass("es-button-error")),a.message&&c.find(".js-es-search__messages").html(a.message)}}).always(function(){}).fail(function(){b.val(Estatik.tr.error),b.removeClass("es-button-green-corner").addClass("es-button-error")})}),a(".js-es-change-update-method").change(function(){var b=a(this),c=b.closest("form").find(".es-msg-container");c.html("");var d={action:"es_change_update_method",nonce:Estatik.settings.save_search_change_method_nonce,id:a(this).data("id"),update_method:a(this).val()};a.post(Estatik.ajaxurl,d,function(a){a=a||{},a.message&&("success"===a.status?a.message='<p class="es-message es-message-success"><i class="fa fa-check-circle-o" aria-hidden="true"></i> '+a.message+"</p>":a.message='<p class="es-message es-message-error"><i class="fa fa-times-circle-o" aria-hidden="true"></i> '+a.message+"</p>",c.html(a.message))},"json").fail(function(){alert(Estatik.tr.system_error)})}),a(".js-es-login-form").click(function(){return a.get(Estatik.ajaxurl,{action:"es_login_form",nonce:Estatik.settings.front_nonce},function(b){a.magnificPopup.open({items:{src:b,type:"inline"}})}).fail(function(){alert(Estatik.tr.system_error)}),!1});var j=a(".es-profile__wrapper--horizontal"),k=a(".es-profile__wrapper--horizontal .es-profile__tabs-wrapper");a(window).on("resize",function(){var b=0;k.find("li").each(function(){b+=a(this).outerWidth()}),k.find("ul").hasClass("slick-initialized")&&k.find("ul").slick("unslick"),j.width()<b&&k.find("ul").slick({variableWidth:!0,prevArrow:'<i class="fa fa-angle-left" aria-hidden="true"></i>',nextArrow:'<i class="fa fa-angle-right" aria-hidden="true"></i>'})}).trigger("resize"),a(".js-switch-block").click(function(){var b=a(a(this).data("block"));return b.hasClass("hidden")?b.removeClass("hidden"):b.addClass("hidden"),!1}),a(".js-saved-search-save").click(function(){var b=a(this).closest(".es-saved-search__item"),c=b.find(".es-msg-container");return a.post(Estatik.ajaxurl,a(this).closest("form").serialize(),function(a){a=a||{},a.message&&("success"===a.status?(a.message='<p class="es-message es-message-success"><i class="fa fa-check-circle-o" aria-hidden="true"></i> '+a.message+"</p>",b.find(".js-saved-search-title").html(a.title)):a.message='<p class="es-message es-message-error"><i class="fa fa-times-circle-o" aria-hidden="true"></i> '+a.message+"</p>",c.html(a.message))},"json").fail(function(){alert(Estatik.tr.system_error)}).always(function(){b.find(".js-switch-block").trigger("click")}),!1});var l=a(".js-es-slideshow");l.length&&l.each(function(){var b=a(this),c=b.children().length,d=b.data("args"),e=parseInt(d.slides_to_show)||1;e=e>=c&&"vertical"===d.slider_effect?c:e;var f=[];e>3&&f.push({breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,dots:!0}}),e>2&&f.push({breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}}),f.push({breakpoint:200,settings:{slidesToShow:1,slidesToScroll:1}});var g={margin:20,slidesToShow:e,arrows:1==d.show_arrows||!1,prevArrow:'<span class="es-slick-arrow es-slick-prev"></span>',nextArrow:'<span class="es-slick-arrow es-slick-next"></span>',responsive:f};g.arrows||(g.autoplay=!0),"vertical"===d.slider_effect&&(g.vertical=!0,g.verticalSwiping=!0,g.autoplaySpeed=5e3),b.slick(g)}),a(".es-slide__bottom").each(function(){var b=a(this);2===b.find(".es-bottom-icon").length&&b.find(".es-bottom-icon:last-child").css({"text-align":"right"})})})}(jQuery);